<template>
    <div class="tyywglpt tyywglpt-ptjlgl-slwgl" :controller="ptjlgl-slwgl-vm">
        <!-- 查询表单 -->
        <div class="tyywglpt-search-box" :click="@deleteSelectItem($event)">
            <ms-form :widget="{$form:@$form,inline:true}">
                <ms-form-item :widget="{label:'平台ID:'}" :class="'form-item'">
                    <div class="has-icon-input-wrap">
                        <input type="input" class="form-control" ms-duplex="@uid" :keypress="@handlePress"
                            :focus="@handleFocus" :blur="@handleBlur" :attr="{title: @uid}">
                        <span class="fa fa-close" :mousedown="@handleClear('uid',$event)|prevent"
                            :visible="false"></span>
                    </div>
                </ms-form-item>

                <ms-form-item :widget="{label:'平台名称:'}" :class="'form-item'">
                    <div class="has-icon-input-wrap">
                        <input type="input" class="form-control" ms-duplex="@name" :keypress="@handlePress"
                            :focus="@handleFocus" :blur="@handleBlur" :attr="{title: @name}">
                        <span class="fa fa-close" :mousedown="@handleClear('name',$event)|prevent"
                            :visible="false"></span>
                    </div>
                </ms-form-item>

                <div class="tyywglpt-search-line">
                    <ms-form-item :class="['form-item']">
                        <label>平台厂商:</label>
                        <ms-select
                            :widget="{col:'manufacturer', value:[@defaultManu], displayValue:'不限', options:@manuOptions}">
                        </ms-select>
                    </ms-form-item>
    
                    <ms-form-item :class="['form-item']">
                        <label>对接协议:</label>
                        <ms-select
                            :widget="{col:'protocol', value:[@defaultProtocol], displayValue:'不限', options:@protocolOptions}">
                        </ms-select>
                    </ms-form-item>
                </div>

                <button type="button" class="btn btn-query" :click="@query">查询</button>
            </ms-form>

        </div>

        <!-- 按钮 -->
        <div class="tyywglpt-tool-bar" :click="@deleteSelectItem($event)">
            <div class="tyywglpt-tool-bar-inner">
                <input type="button" value="添加" :if="authority.SAVE" :click="@handleAdd($event)"
                    :attr="{'disabled':@selectedRowsLength > 0}" class="btn btn-tool"
                    :class="@selectedRowsLength > 0 && 'disabled'">
                <input type="button" value="修改" :if="authority.MODIFY" :click="@handleModify($event)"
                    :attr="{'disabled':(@selectedRowsLength !== 1 || @checkedData.relPlatform.status ==0)}"
                    class="btn btn-tool"
                    :class="(@selectedRowsLength !== 1 || @checkedData.relPlatform.status ==0) && 'disabled'">
                <!-- <input type="button" value="删除" :if="authority.DELETE" :click="@handleDelete" :attr="{'disabled':@selectedRowsLength !== 1}"
                    class="btn btn-tool" :class="@selectedRowsLength !== 1 && 'disabled'"> -->
                <input type="button" value="视图管理" :click="@handleView($event)"
                    :attr="{'disabled':(@selectedRowsLength !== 1 || @checkedData.relPlatform.status ==0)}"
                    class="btn btn-tool"
                    :class="(@selectedRowsLength !== 1 || @checkedData.relPlatform.status ==0) && 'disabled'" :if="authority.STGL">
            
                <input type="button" value="停用" :if="authority.STATUS" :click="@handleDisable($event)"
                    :attr="{'disabled':(@selectedRowsLength == 0),'value':(@checkedData.relPlatform.status ==0?'启用':'停用')}"
                    class="btn btn-tool" :class="(@selectedRowsLength == 0) && 'disabled'">
            </div>
        </div>

        <!-- 表格 -->
        <div  :if="@loading" class="list-loading" :css="{height:@slwglTableHeight}">
            <span>结果加载中</span>
        </div>
        <div class="no_data" :if="!@loading && @list.length==0" :css="{height:@slwglTableHeight}">暂无数据</div>
        <div class="ptjlgl-slwgl-table" style="background: #dfe9f7;" :css="{height:@slwglTableHeight}" :if="!@loading && @list.length!==0">
            <!-- <ms-comtable :widget="{current:@pagination.current,pageSize:@pagination.pageSize,loading:@loading,data:@list,actions:@actions,onChange:selectChange,panelCss:{position: 'absolute',bottom: 60,top: 228,left: 8,right: 8}}">
                <ms-comtable-header :widget="{dataIndex:'id',type:'selection',colwidth:'5%'}"></ms-comtable-header>
                <ms-comtable-header :widget="{title:'序号',type:'index',colwidth:'5%',popover:true}"></ms-comtable-header>
                <ms-comtable-header :widget="{title:'平台ID',dataIndex:'id',colwidth:'10%',popover:true}"></ms-comtable-header>
                <ms-comtable-header :widget="{title:'平台名称',dataIndex:'name',colwidth:'10%',isHide:false,popover:true}"></ms-comtable-header>
                <ms-comtable-header :widget="{title:'平台类型',dataIndex:'type',colwidth:'10%',isHide:false,popover:true}"></ms-comtable-header>
                <ms-comtable-header :widget="{title:'平台厂商',dataIndex:'manufacturer',colwidth:'12%',isHide:false,popover:true}"></ms-comtable-header>
                <ms-comtable-header :widget="{title:'平台版本',dataIndex:'version',colwidth:'12%',isHide:false,popover:true}"></ms-comtable-header>
                <ms-comtable-header :widget="{title:'对接协议',dataIndex:'protocol',colwidth:'12%',isHide:false,popover:true}"></ms-comtable-header>
                <ms-comtable-header :widget="{title:'平台地址',dataIndex:'ip',colwidth:'12%',isHide:false,popover:true}"></ms-comtable-header>
                <ms-comtable-header :widget="{title:'平台说明',dataIndex:'description',colwidth:'12%',isHide:false,popover:true}"></ms-comtable-header>
            </ms-comtable> -->
            <ul class="card_ul">
                <li :for="($index,el) in @list" class="card_li">
                    <div class="card num_card" :click="@deleteSelectItem($event)">
                        <span>
                            {{(@pagination.current-1)*(@pagination.pageSize) + ($index+1)}}
                        </span>
                    </div>
                    <div class="card localPlat_card" :click="@handelSelectItem(el,$index,$event)" 
                    :css="{background:(el.relPlatform.status ==0 ?'#d4d4d4':'#ffffff')}">
                        <h4>本级平台</h4>
                        <div class="row">
                            <div class="col col_ll">
                                <span>平台名称：</span>
                                <span :if="el.localPlaform">{{el.localPlaform.name || "-"}}</span>
                                <span :if="!el.localPlaform">-</span>
                            </div>
                            <div class="col col_rr">
                                <span>平台IP：</span>
                                <span :if="el.localPlaform">{{el.localPlaform.ip || "-"}}</span>
                                <span :if="!el.localPlaform">-</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col_ll">
                                <span>平台ID：</span>
                                <span :if="el.localPlaform">{{el.localPlaform.id || "-"}}</span>
                                <span :if="!el.localPlaform">-</span>
                            </div>
                            <div class="col col_rr">
                                <span>平台端口：</span>
                                <span :if="el.localPlaform">{{el.localPlaform.port || "-"}}</span>
                                <span :if="!el.localPlaform">-</span>
                            </div>
                        </div>
                        <div class="row">
                            <span class="col_l">平台说明：</span>
                            <span :if="el.localPlaform" class="col_r" ms-html="el.localPlaform.description || '-'"></span>
                            <span :if="!el.localPlaform">-</span>
                        </div>
                    </div>
                    <div class="card protocol_card" :click="@deleteSelectItem($event)">
                        <span class="to_l">
                            &lt;
                            <!-- <img src="/static/image/tyywglpt/u6455"/> -->
                        </span>
                        <span>{{el.relPlatform.protocol || "-"}}</span>
                        <span class="to_r">
                            &gt;
                            <!-- <img src="/static/image/tyywglpt/u7490"/> -->
                        </span>
                    </div>
                    <div class="card xjpt_card" :click="@handelSelectItem(el,$index,$event)"
                        :css="{background:(el.relPlatform.status ==0 ?'#d4d4d4':'#ffffff')}">
                        <h4>上级平台</h4>
                        <div class="row">
                            <span>平台名称：</span>
                            <span>{{el.relPlatform.name || "-"}}</span>
                        </div>
                        <div class="row">
                            <div class="col col_ll">
                                <span>平台ID：</span>
                                <span>{{el.relPlatform.id || "-"}}</span>
                            </div>
                            <div class="col col_rr">
                                <span>平台类型：</span>
                                <span>{{el.relPlatform.typeDesc || "-"}}</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col_ll">
                                <span>平台IP：</span>
                                <span>{{el.relPlatform.ip || "-"}}</span>
                            </div>
                            <div class="col col_rr">
                                <span>平台端口：</span>
                                <span>{{el.relPlatform.port || "-"}}</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col_ll">
                                <span>平台厂商：</span>
                                <span>{{el.relPlatform.manufacturer || "-"}}</span>
                            </div>
                            <div class="col col_rr">
                                <span>平台版本：</span>
                                <span>{{el.relPlatform.version || "-"}}</span>
                            </div>
                        </div>
                        <div class="row">
                            <span class="col_l">平台说明：</span>
                            <span class="col_r"  ms-html="el.relPlatform.description || '-'"></span>
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <!-- 批量删除 -->
        <!-- <div class="bottom-tool-bar">
            <input class="btn btn-tool" :if="authority.DELETE" :class="@selectedRowsLength < 1 && 'disabled'" type="button" value="批量删除"
                :click="@handleBatchDelete">
        </div> -->

        <!-- 分页 -->
        <ms-pages
            :widget="{total:@pagination.total,pageSize:@pagination.pageSize,current:@pagination.current,getCurrent:@getCurrent}">
        </ms-pages>

        <!-- 添加弹窗 -->
        <div :controller="ptjlgl-slwgl-add-vm" class="sbzygl-modal ptjlgl-modal ptjlgl-modal-add">
            <xmp
                :widget="{is:'common-ms-modal', title:'添加', modalSelector:'#ptjlgl-modal-add', modalWidth:700, modalHeight: auto, btnalign:'center',show:@show, onOk:@handleOk, onCancel:@handleCancel}">
                <div id="ptjlgl-modal-add">
                    <ms-form :widget="{$form:@$form,inline:true}">
                        <h4>本级平台</h4>
                        <ms-form-item :class="['local_name','form-item',!@validJson.local_name && 'has-error']">
                            <label>
                                <i>* </i>平台名称:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.local_name}"
                                    :duplex="@inputJson.local_name" :focus="@handleFocus('local_name',$event)"
                                    :blur="@handleFormat('local_name',null,$event)">
                                    <!-- :blur="@handleFormat('local_name',@nameReg,$event)"> -->
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('local_name',$event)|prevent"></i>
                            </div>
                            <div class="form-tip invalid-tip" :if="!@validJson.local_name">{{@inputJson.local_name.length > 30 ?
                                    '最多只可输入30位字符' : '请输入平台名称'}}</div>
                        </ms-form-item>
                        <ms-form-item :class="['local_ip','form-item',!@validJson.local_ip && 'has-error']">
                            <label>
                                <i>* </i>平台IP:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.local_ip}"
                                    :duplex="@inputJson.local_ip" :focus="@handleFocus('local_ip',$event)"
                                    :blur="@handleFormat('local_ip',@ipReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('local_ip',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip" :if="@showJson.local_ip">
                                <i class="fa fa-info-circle"></i>支持0~255的数字与.的组合</div>
                            <div class="form-tip invalid-tip tip-md" :if="!@validJson.local_ip">请输入正确的平台IP</div>
                        </ms-form-item>
                        <ms-form-item :class="['local_id','form-item',!@validJson.local_id && 'has-error']">
                            <label>
                                <i>* </i>平台ID:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.local_id}"
                                    :duplex="@inputJson.local_id" :focus="@handleFocus('local_id',$event)"
                                    :blur="@handleFormat('local_id',@idReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('local_id',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip" :if="@showJson.local_id">
                                <i class="fa fa-info-circle"></i>支持数字与字母组合</div>
                            <div class="form-tip invalid-tip" :if="!@validJson.local_id">请输入正确的平台ID</div>
                        </ms-form-item>
                        <ms-form-item :class="['local_port','form-item',!@validJson.local_port && 'has-error']">
                            <label>
                                <i>* </i>平台端口:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.local_port}"
                                    :duplex="@inputJson.local_port" :focus="@handleFocus('local_port',$event)"
                                    :blur="@handleFormat('local_port',@portReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('local_port',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip tip-md" :if="@showJson.local_port">
                                <i class="fa fa-info-circle"></i>支持0~65535的整数</div>
                            <div class="form-tip invalid-tip" :if="!@validJson.local_port">请输入正确的平台端口</div>
                        </ms-form-item>
                        <ms-form-item
                            :class="['local_description','form-item form-item-lg textarea-item',!@validJson.local_description && 'has-error']">
                            <label>
                                <i>* </i>平台说明:</label>
                            <div class="has-icon">
                                <textarea  maxlength="200" class="form-control" :attr="{title:@inputJson.local_description}"
                                    :duplex="@inputJson.local_description"
                                    :focus="@handleFocus('local_description',$event)"
                                    :blur="@handleFormat('local_description',@descriptionReg,$event)"></textarea>
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('local_description',$event)|prevent"></i>
                            </div>
                            <div class="form-tip invalid-tip" :if="!@validJson.local_description">请输入平台说明</div>
                            <div class="form-tip" style="text-align: right;padding-right: 25px;">{{@inputJson.local_description.length}}/200</div>
                        </ms-form-item>

                        <h4>上级平台</h4>
                        <ms-form-item :class="['name','form-item',!@validJson.name && 'has-error']">
                            <label>
                                <i>* </i>平台名称:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.name}"
                                    :duplex="@inputJson.name" :focus="@handleFocus('name',$event)"
                                    :blur="@handleFormat('name',null,$event)">
                                    <!-- :blur="@handleFormat('name',@nameReg,$event)"> -->
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('name',$event)|prevent"></i>
                            </div>
                            <div class="form-tip invalid-tip" :if="!@validJson.name">{{@inputJson.name.length > 30 ?
                                '最多只可输入30位字符' : '请输入平台名称'}}</div>
                        </ms-form-item>
                        <ms-form-item :class="['ip','form-item',!@validJson.ip && 'has-error']">
                            <label>
                                <i>* </i>平台IP:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.ip}"
                                    :duplex="@inputJson.ip" :focus="@handleFocus('ip',$event)"
                                    :blur="@handleFormat('ip',@ipReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('ip',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip" :if="@showJson.ip">
                                <i class="fa fa-info-circle"></i>支持0~255的数字与.的组合</div>
                            <div class="form-tip invalid-tip tip-md" :if="!@validJson.ip">请输入正确的平台IP</div>
                        </ms-form-item>
                        <ms-form-item
                            :class="['type','form-item', !@validJson.type && 'has-error', (@typeOptions.length === 0 && 'disabled')]">
                            <label>
                                <i>* </i>平台类型:</label>
                            <ms-select
                                :widget="{col:'type', value:[@defaultType], displayValue:'暂无可选的平台类型', options:@typeOptions}">
                            </ms-select>
                            <div class="form-tip invalid-tip" :if="!@validJson.type">请选择平台类型</div>
                        </ms-form-item>
                        <ms-form-item :class="['port','form-item',!@validJson.port && 'has-error']">
                            <label>
                                <i>* </i>平台端口:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.port}"
                                    :duplex="@inputJson.port" :focus="@handleFocus('port',$event)"
                                    :blur="@handleFormat('port',@portReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('port',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip tip-md" :if="@showJson.port">
                                <i class="fa fa-info-circle"></i>支持0~65535的整数</div>
                            <div class="form-tip invalid-tip" :if="!@validJson.port">请输入正确的平台端口</div>
                        </ms-form-item>
                        <ms-form-item
                            :class="['manufacturer','form-item', !@validJson.manufacturer && 'has-error', (@manuOptions.length === 0 && 'disabled')]">
                            <label>
                                <i>* </i>平台厂商:</label>
                            <ms-select
                                :widget="{col:'manufacturer', value:[@defaultManu], displayValue:'暂无可选的平台厂商', options:@manuOptions}">
                            </ms-select>
                            <div class="form-tip invalid-tip" :if="!@validJson.manufacturer">请选择平台厂商</div>
                        </ms-form-item>
                        <ms-form-item
                            :class="['protocol','form-item', !@validJson.protocol && 'has-error', (@protocolOptions.length === 0 && 'disabled')]">
                            <label>
                                <i>* </i>对接协议:</label>
                            <ms-select
                                :widget="{col:'protocol', value:[@defaultProtocol], displayValue:'暂无可选的对接协议', options:@protocolOptions}">
                            </ms-select>
                            <div class="form-tip invalid-tip" :if="!@validJson.protocol">请选择对接协议</div>
                        </ms-form-item>
                        <ms-form-item :class="['version','form-item',!@validJson.version && 'has-error']">
                            <label>
                                <i>* </i>平台版本:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.version}"
                                    :duplex="@inputJson.version" :focus="@handleFocus('version',$event)"
                                    :blur="@handleFormat('version',@versionReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('version',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip tip-md" :if="@showJson.version">
                                <i class="fa fa-info-circle"></i>支持英文、数字下划线_、中线-、小数点.的组合</div>
                            <div class="form-tip invalid-tip" :if="!@validJson.version">{{@inputJson.version.length >
                                30 ? '最多只可输入30位字符' : '请输入正确的平台版本'}}</div>
                        </ms-form-item>
                        <ms-form-item :class="['id','form-item',!@validJson.id && 'has-error']">
                            <label>
                                <i>* </i>平台ID:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.id}"
                                    :duplex="@inputJson.id" :focus="@handleFocus('id',$event)"
                                    :blur="@handleFormat('id',@idReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('id',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip" :if="@showJson.id">
                                <i class="fa fa-info-circle"></i>支持数字与字母组合</div>
                            <div class="form-tip invalid-tip" :if="!@validJson.id">请输入正确的平台ID</div>
                        </ms-form-item>
                        <ms-form-item
                            :class="['description','form-item form-item-lg textarea-item',!@validJson.description && 'has-error']">
                            <label>
                                <i>* </i>平台说明:</label>
                            <div class="has-icon">
                                <textarea maxlength="200" class="form-control" :attr="{title:@inputJson.description}"
                                    :duplex="@inputJson.description" :focus="@handleFocus('description',$event)"
                                    :blur="@handleFormat('description',@descriptionReg,$event)"></textarea>
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('description',$event)|prevent"></i>
                            </div>
                            <div class="form-tip invalid-tip" :if="!@validJson.description">请输入平台说明</div>
                            <div class="form-tip" style="text-align: right;padding-right: 25px;">{{@inputJson.description.length}}/200</div>
                        </ms-form-item>
                    </ms-form>
                </div>
            </xmp>
        </div>

        <!-- 修改弹窗 -->
        <div :controller="ptjlgl-slwgl-modify-vm" class="sbzygl-modal ptjlgl-modal ptjlgl-modal-modify">
            <xmp
                :widget="{is:'common-ms-modal', title:'修改', modalSelector:'#ptjlgl-modal-modify', modalWidth:700, modalHeight: auto, btnalign:'center',show:@show, onOk:@handleOk, onCancel:@handleCancel}">
                <div id="ptjlgl-modal-modify">
                    <ms-form :widget="{$form:@$form,inline:true}">
                        <h4>本级平台</h4>
                        <ms-form-item :class="['local_name','form-item',!@validJson.local_name && 'has-error']">
                            <label>
                                <i>* </i>平台名称:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.local_name}"
                                    :duplex="@inputJson.local_name" :focus="@handleFocus('local_name',$event)"
                                    :blur="@handleFormat('local_name',null,$event)">
                                    <!-- :blur="@handleFormat('local_name',@nameReg,$event)"> -->
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('local_name',$event)|prevent"></i>
                            </div>
                            <div class="form-tip invalid-tip" :if="!@validJson.local_name">{{@inputJson.local_name.length > 30 ?
                                    '最多只可输入30位字符' : '请输入平台名称'}}</div>
                        </ms-form-item>
                        <ms-form-item :class="['local_ip','form-item',!@validJson.local_ip && 'has-error']">
                            <label>
                                <i>* </i>平台IP:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.local_ip}"
                                    :duplex="@inputJson.local_ip" :focus="@handleFocus('local_ip',$event)"
                                    :blur="@handleFormat('local_ip',@ipReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('local_ip',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip" :if="@showJson.local_ip">
                                <i class="fa fa-info-circle"></i>支持0~255的数字与.的组合</div>
                            <div class="form-tip invalid-tip tip-md" :if="!@validJson.local_ip">请输入正确的平台IP</div>
                        </ms-form-item>
                        <ms-form-item :class="['local_id','form-item',!@validJson.local_id && 'has-error']">
                            <label>
                                <i>* </i>平台ID:</label>
                            <div :class="['has-icon', @hasLocalData && 'has-icon-disabled']">
                                <input :if="!@hasLocalData" type="text" class="form-control" :attr="{title:@inputJson.local_id}"
                                    :duplex="@inputJson.local_id" :focus="@handleFocus('local_id',$event)"
                                    :blur="@handleFormat('local_id',@idReg,$event)">
                                <input :if="@hasLocalData" type="text" class="form-control" :attr="{title:@inputJson.local_id}"
                                    :duplex="@inputJson.local_id" disabled>
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('local_id',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip" :if="@showJson.local_id">
                                <i class="fa fa-info-circle"></i>支持数字与字母组合</div>
                            <div class="form-tip invalid-tip" :if="!@validJson.local_id">平台ID不能为空</div>
                        </ms-form-item>
                        <ms-form-item :class="['local_port','form-item',!@validJson.local_port && 'has-error']">
                            <label>
                                <i>* </i>平台端口:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.local_port}"
                                    :duplex="@inputJson.local_port" :focus="@handleFocus('local_port',$event)"
                                    :blur="@handleFormat('local_port',@portReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('local_port',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip tip-md" :if="@showJson.local_port">
                                <i class="fa fa-info-circle"></i>支持0~65535的整数</div>
                            <div class="form-tip invalid-tip" :if="!@validJson.local_port">请输入正确的平台端口</div>
                        </ms-form-item>
                        <ms-form-item
                            :class="['local_description','form-item form-item-lg textarea-item',!@validJson.local_description && 'has-error']">
                            <label>
                                <i>* </i>平台说明:</label>
                            <div class="has-icon">
                                <textarea maxlength="200" class="form-control" :attr="{title:@inputJson.local_description}"
                                    :duplex="@inputJson.local_description"
                                    :focus="@handleFocus('local_description',$event)"
                                    :blur="@handleFormat('local_description',@descriptionReg,$event)"></textarea>
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('local_description',$event)|prevent"></i>
                            </div>
                            <div class="form-tip invalid-tip" :if="!@validJson.local_description">请输入平台说明</div>
                            <div class="form-tip" style="text-align: right;padding-right: 25px;">{{@inputJson.local_description.length}}/200</div>
                        </ms-form-item>

                        <h4>上级平台</h4>
                        <ms-form-item :class="['name','form-item',!@validJson.name && 'has-error']">
                            <label>
                                <i>* </i>平台名称:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.name}"
                                    :duplex="@inputJson.name" :focus="@handleFocus('name',$event)"
                                    :blur="@handleFormat('name',null,$event)">
                                    <!-- :blur="@handleFormat('name',@nameReg,$event)"> -->
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('name',$event)|prevent"></i>
                            </div>
                            <div class="form-tip invalid-tip" :if="!@validJson.name">{{@inputJson.name.length > 30 ?
                                '最多只可输入30位字符' : '请输入平台名称'}}</div>
                        </ms-form-item>
                        <ms-form-item :class="['ip','form-item',!@validJson.ip && 'has-error']">
                            <label>
                                <i>* </i>平台IP:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.ip}"
                                    :duplex="@inputJson.ip" :focus="@handleFocus('ip',$event)"
                                    :blur="@handleFormat('ip',@ipReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('ip',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip" :if="@showJson.ip">
                                <i class="fa fa-info-circle"></i>支持0~255的数字与.的组合</div>
                            <div class="form-tip invalid-tip tip-md" :if="!@validJson.ip">请输入正确的平台IP</div>
                        </ms-form-item>
                        <ms-form-item
                            :class="['type','form-item', !@validJson.type && 'has-error', (@typeOptions.length === 0 && 'disabled')]">
                            <label>
                                <i>* </i>平台类型:</label>
                            <ms-select
                                :widget="{col:'type', value:[@defaultType], displayValue:(@typeOptions.length === 0 ? '暂无可选的平台类型': @unMatchJson.type), options:@typeOptions}">
                            </ms-select>
                            <div class="form-tip invalid-tip" :if="!@validJson.type">请选择平台类型</div>
                        </ms-form-item>
                        <ms-form-item :class="['port','form-item',!@validJson.port && 'has-error']">
                            <label>
                                <i>* </i>平台端口:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.port}"
                                    :duplex="@inputJson.port" :focus="@handleFocus('port',$event)"
                                    :blur="@handleFormat('port',@portReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('port',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip tip-md" :if="@showJson.port">
                                <i class="fa fa-info-circle"></i>支持0~65535的整数</div>
                            <div class="form-tip invalid-tip" :if="!@validJson.port">请输入正确的平台端口</div>
                        </ms-form-item>
                        <ms-form-item
                            :class="['manufacturer','form-item', !@validJson.manufacturer && 'has-error', (@manuOptions.length === 0 && 'disabled')]">
                            <label>
                                <i>* </i>平台厂商:</label>
                            <ms-select
                                :widget="{col:'manufacturer', value:[@defaultManu], displayValue:(@manuOptions.length === 0 ? '暂无可选的平台厂商': @unMatchJson.manu), options:@manuOptions}">
                            </ms-select>
                            <div class="form-tip invalid-tip" :if="!@validJson.manufacturer">请选择平台厂商</div>
                        </ms-form-item>
                        <ms-form-item
                            :class="['protocol','form-item', !@validJson.protocol && 'has-error', (@protocolOptions.length === 0 && 'disabled')]">
                            <label>
                                <i>* </i>对接协议:</label>
                            <ms-select
                                :widget="{col:'protocol', value:[@defaultProtocol], displayValue:(@protocolOptions.length === 0 ? '暂无可选的对接协议': @unMatchJson.protocol), options:@protocolOptions}">
                            </ms-select>
                            <div class="form-tip invalid-tip" :if="!@validJson.protocol">请选择对接协议</div>
                        </ms-form-item>
                        <ms-form-item :class="['version','form-item',!@validJson.version && 'has-error']">
                            <label>
                                <i>* </i>平台版本:</label>
                            <div class="has-icon">
                                <input type="text" class="form-control" :attr="{title:@inputJson.version}"
                                    :duplex="@inputJson.version" :focus="@handleFocus('version',$event)"
                                    :blur="@handleFormat('version',@versionReg,$event)">
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('version',$event)|prevent"></i>
                            </div>
                            <div class="form-tip valid-tip tip-md" :if="@showJson.version">
                                <i class="fa fa-info-circle"></i>支持英文、数字下划线_、中线-、小数点.的组合</div>
                            <div class="form-tip invalid-tip" :if="!@validJson.version">{{@inputJson.version.length >
                                30 ? '最多只可输入30位字符' : '请输入正确的平台版本'}}</div>
                        </ms-form-item>
                        <ms-form-item :class="['id','form-item',!@validJson.id && 'has-error']">
                            <label>
                                <i>* </i>平台ID:</label>
                            <div class="has-icon has-icon-disabled">
                                <input type="text" class="form-control" :attr="{title:@inputJson.id}"
                                    :duplex="@inputJson.id" disabled>
                            </div>
                            <div class="form-tip invalid-tip" :if="!@validJson.id">平台ID不能为空</div>
                        </ms-form-item>
                        <ms-form-item
                            :class="['description','form-item form-item-lg textarea-item',!@validJson.description && 'has-error']">
                            <label>
                                <i>* </i>平台说明:</label>
                            <div class="has-icon">
                                <textarea maxlength="200" class="form-control" :attr="{title:@inputJson.description}"
                                    :duplex="@inputJson.description" :focus="@handleFocus('description',$event)"
                                    :blur="@handleFormat('description',@descriptionReg,$event)"></textarea>
                                <i class="fa fa-close" :visible="false"
                                    :mousedown="@handleClear('description',$event)|prevent"></i>
                            </div>
                            <div class="form-tip invalid-tip" :if="!@validJson.description">请输入平台说明</div>
                            <div class="form-tip" style="text-align: right;padding-right: 25px;">{{@inputJson.description.length}}/200</div>
                        </ms-form-item>
                    </ms-form>
                </div>
            </xmp>
        </div>

        <!-- 删除弹窗 -->
        <div :controller="ptjlgl-slwgl-delete-vm" class="sbzygl-modal sbzygl-modal-tip ptjlgl-modal-delete">
            <xmp
                :widget="{is:'common-ms-modal', title:'提示', modalSelector:'#ptjlgl-del-body', drag:true, btnalign:'center', modalWidth:400, modalHeight:80, show:@show,onOk:@handleOk,onCancel:@handleCancel}">
                <div id="ptjlgl-del-body">
                    <p class="tip-text">是否确定删除选中的{{@selectedRowsLength}}条数据？</p>
                </div>
            </xmp>
        </div>

        <!-- 是否停用弹窗 -->
        <div :controller="ptjlgl-slwgl-Disable-vm" class="sbzygl-modal sbzygl-modal-tip ptjlgl-modal-Disable">
            <xmp
                :widget="{is:'common-ms-modal', title:'提示', modalSelector:'#ptjlgl-Disable-body', drag:true, btnalign:'center', modalWidth:400, modalHeight:80, show:@show,onOk:@handleOk,onCancel:@handleCancel}">
                <div id="ptjlgl-Disable-body">
                    <p class="tip-text" :if="@selectedData.relPlatform.status == 1">
                        是否停用该平台？</p>
                    <p class="tip-text" :if="@selectedData.relPlatform.status == 0">
                        是否启用该平台？</p>
                </div>
            </xmp>
        </div>

        <!-- 视图管理弹窗 -->
        <div :controller="ptjlgl-slwgl-view-vm" class="sbzygl-modal ptjlgl-modal ptjlgl-modal-view">
            <xmp
                :widget="{is:'common-ms-modal', title:'视图管理', modalSelector:'#ptjlgl-modal-view', modalWidth:720, modalHeight: auto, btnalign:'center',show:@show, onOk:@handleOk, onCancel:@handleCancel}">
                <div id="ptjlgl-modal-view">
                    <div class="view-box" id="ptjlgl-slwgl-modal-view">

                        <div class="view-links">
                            <!-- <div class="benyu" :class="@swichView && 'active'" style="    width: 100%;" :click="handleSwichView('benyu')">
                                本域
                            </div> -->
                            <!-- <div class="waiyu" :class="!@swichView && 'active'" :click="handleSwichView('waiyu')">
                                外域
                            </div> -->
                        </div>

                        <div class="view-tabs">
                            <div class="view-tab view-tab1" :visible="@swichView">

                                <div class="fz">
                                    <div class="tyywglpt-tool-bar">
                                        <div class="tyywglpt-tool-bar-inner">
                                            <input type="button" value="业务分组" :click="handleView('ywfz')"
                                                :class="@viewSelected?'':'noselect'" class="btn btn-tool yefzBtn">
                                            <input type="button" value="行政区划" :click="handleView('xzqh')"
                                                :class="@viewSelected?'noselect':''" class="btn btn-tool">
                                        </div>
                                    </div>
                                </div>

                                <div class="tree-panel" :visible="@viewSelected">
                                    <ms-ztree
                                        :widget="{treeId:'slwg-ywfz-View',switchType:'ywfz', checkable: true,treeData: @data,setChkDisabled:@setChkDisabled}">
                                    </ms-ztree>
                                </div>

                                <div class="tree-panel" :visible="!@viewSelected">
                                    <ms-ztree
                                        :widget="{treeId:'slwg-xzqh-View',switchType:'xzqh',checkable: true,treeData: @data2,setChkDisabled:@setChkDisabled2}">
                                    </ms-ztree>
                                </div>

                            </div>
                            <!-- <div class="view-tab view-tab2" :visible="!@swichView">
                                <div class="tree-panel">
                                    <ms-ztree :widget="{treeId:'slwg-waiyu-View',checkable: true,treeData: @data3,onCheck:@handleCheck,checkedKeys: @checkedKeys,cleanCheckedKeys:@cleanCheckedKeys,isLoadNodes:@isLoadNodes3,isDoneFn:@isDoneWyFn}"></ms-ztree>
                                </div>
                            </div> -->
                        </div>

                    </div>
                </div>
            </xmp>
        </div>
    </div>
</template>